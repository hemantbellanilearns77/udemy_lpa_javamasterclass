name: Checkstyle + PMD

on:
  push:
    branches: [main]

jobs:
  static-analysis:
    name: Static Code Analysis
    runs-on: windows-latest

    steps:
      - name: ðŸ“¥ Checkout Code
        uses: actions/checkout@v4

      # Setup Java
      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: List directory structure for debug
        run: dir /s /b
        shell: cmd

      ##########################
      # DOWNLOAD: Checkstyle
      ##########################
      - name: ðŸ“¦ Download Checkstyle
        run: |
          mkdir tools\checkstyle
          curl -L -o checkstyle.jar https://github.com/checkstyle/checkstyle/releases/download/checkstyle-10.26.1/checkstyle-10.26.1-all.jar
      # move checkstyle.jar tools\checkstyle\checkstyle.jar

      ##########################
      # RUN: Checkstyle Analysis
      ##########################
      - name: ðŸ§¼ Run Checkstyle
        run: scripts\run-checkstyle.bat

